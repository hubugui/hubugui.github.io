---
layout: post
title: Cuda无效设备                                 # Title of the page
hide_title: false                                   # Hide the title when displaying the post, but shown in lists of posts
# feature-img: "assets/img/sample.png"              # Add a feature-image to the post
# thumbnail: "assets/img/stb_background.png"        # Add a thumbnail image on blog view
# color: rgb(80,140,22)                             # Add the specified color as feature image, and change link colors in post
bootstrap: true                                     # Add bootstrap to the page
tags: [nvidia, cuda, ffmpeg]
excerpt_separator: <!--more-->
---

<!--more-->
* TOC
{:toc}

# 1. 背景

一个软件支持在1块Nvidia显卡上做视频解码、图像处理和D3D9绘制，去年版本v1.0在项目A的Windows7 + 2块显卡环境下，每个进程对应1个显卡时工作正常。

去年下半年为项目B加入了一些新功能发布v1.1，通过了项目B的Windows 10单显卡环境测试和现场验证。现在给项目A升级发现只能有一个进程能工作，第2个失败，日志中显示CUDA错误：

{% highlight c linenos %}
CUDA_ERROR_INVALID_DEVICE: invalid device ordinal
{% endhighlight %}

# 2. 过程

### 2022/08/19，周五



# 3. 答案

# 4. 回顾

# 5. 重新出发

# 6. 根因