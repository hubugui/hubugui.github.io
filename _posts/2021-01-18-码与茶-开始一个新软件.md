---
layout: post
title: 码与茶－开始一个新软件                            # Title of the page
hide_title: false                                  # Hide the title when displaying the post, but shown in lists of posts
# feature-img: "assets/img/sample.png"              # Add a feature-image to the post
# thumbnail: "assets/img/stb_background.png"   # Add a thumbnail image on blog view
# color: rgb(80,140,22)                             # Add the specified color as feature image, and change link colors in post
bootstrap: true                                   # Add bootstrap to the page
tags: [码与茶]
excerpt_separator: <!--more-->
---

<!--more-->
* TOC
{:toc}

### 1. 开始的开始

了解开发背景和需求后，先别动手，思考几个问题：

1. 用户是谁？
2. 用户在什么时间、什么场景下，有哪些急需解决的问题？
3. 我要开发的软件能把用户的问题解决到什么程度？
4. 用户如何使用我的软件？
5. 如果初恋也是用户，我再做些什么会更好？
6. 做Demo还是正式使用？

进入设计开发阶段后，组织内不同角色并行流水线工作，每个人的日常活动耽于细节，普遍缺乏回顾和反馈，这可能会导致从需求、产品设计、软件设计、开发、测试的一系列，略微偏离目标、失去做得更好的机会。

所以作为开发者的你和伙伴们，回答上面问题不仅仅可以在动手之前重新核对目标，也用于行进途中校准方向，提升效率。建议在腾讯文档中新建一个演示文档，插入表格，第一列填写问题，第二列填写答案，第三列填写思考。每天的开发活动中，惦记着这些问题，有新的idea填写到第三列并记录日期，反复咀嚼后再更新第二列的答案，并落实到实际工作中。

### 2. 问题和程度

#### 2.1. 需求

产品需求来自产品经理，技术需求来自开发者。个人软件的需求则全部来自你自身，比如重写一个HTTP服务器。以敏捷中名词为例，无论需求从哪里来，作为开发者要认真思考需求的描述和验收标准：

1. 说明是否不清晰，有无隐式的未知前提和约束？
2. 实现有哪些依赖？
3. 验收标准有无矛盾？
4. 如果有明显的多义性如未指明操作系统、浏览器类型、并发数量、响应时间、API实现数量、弹出A或B的顺序，需尽快反馈。
5. 新功能和现有系统有无矛盾，如何解决？
6. 实现这些验收标准，需要说明哪些前提、限制约束。
7. 开发完之后如何测试？

疑惑点要及时反馈给提出者，这个阶段的零星失误都可能导致延期。

#### 2.2. UI和UE

UI/UE充分表达了产品经理满足用户期待的品味，开发者应反复操作UE，揣摩产品经理的意图，顺应开发，遇到UE不足时延续她的打法。

没有UI的软件也需要考虑人机交互，比如命令行帮助、运行时命令交互。

### 3. 技术选型

几项原则：

1. 主流，简单。
2. 开源而不是闭源。
3. 社区火热，Github的Star数。
4. 易兼容现有系统。
5. 不要炫技。

### 4. 数据采集

任何软件都需要朝着目标的快速迭代来纠偏、改进方向，代码中要设计采集软件性能指标、运营指标的“探针”，通过日志或时序数据库保存，在离线提取后可通过UI显示分析结果。

### 5. 持续集成

参考[持续交付与Jenkins实践](https://hubugui.github.io/2019/10/03/%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E4%B8%8EJenkins%E5%AE%9E%E8%B7%B5.html)，要做到：

1. 自动构建，执行单元测试的自动化脚本。
2. 自动发布。
3. 自动部署，安装及运行。

### 6. 怎么测试？

#### 6.1. 测试用例

需求服务于用户，测试从需求出发，首先要站在用户角度，找出评价软件是否在前提和约束基础上达到以下目标的测试用例：

1. 是否解决了用户问题。
2. 问题的解决程度如性能是否符合验收标准。
3. 软件质量的六大性是否合理。

随后是再开展逐项检验。

#### 6.2. 自动化测试

开发者一定要多采用自动化测试方法，从而节省自己的时间去做更有价值的事，恰好自动化后也更容易回归定量定性的测试，即使放到线上环境也可以继续检验。目前对于UI的自动化测试都有许多方案，非UI软件，起码可以通过脚本模拟软件的输入和输出，并分析运行时日志来统计运行状态。

如果你认为某些需求无法自动化测试甚至无法测试，闲暇不妨看看技术书籍，科技新闻和科幻小说，没有做不到，只有想不到。

#### 6.3. 测试环境

ToC业务的后端软件大多部署在云上，规划好负载均衡、灾备的方案后，具备了实施类似金丝雀测试的基础，再结合自动化测试，不难自动统计出不同版本软件的质量和运营数据。前端软件如手机、PC端也有许多虚拟化手段，故搭建测试环境较为容易。

ToB业务很多非标准化的项目，往往得到用户现场才有测试环境，这对于开发者来说却是很糟糕，但也没有严重到要测试一款号称能在太阳表面运行的软件，试试如下办法：

1. 争取拿到依赖的第三方软件，在公司内试验。
2. 准备好软件及配套测试工具、用例，发给现场伙伴帮助检验，测试用例要得出定量、定性的结论，测试工具或日志等要给出明确结论。

### 7. 最后的最后

1. 开发者是软件的父母，用户是软件的伴侣，谁也不希望费时费力制作的软件被他的伴侣嫌弃缺少管教。
2. 拿到性能和运营数据后，开展分析，评估产品上是否达到最初目标、技术上还有哪些优化空间。